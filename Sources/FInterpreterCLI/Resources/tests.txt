# 1. Literals and simple assignment
42
-7
+3.14
+3..14
true
null
(setq x 5) x
(setq x 5)) x

# 2. Quote and lists
'x
(setq t '(plus minus times divide)) t

# 3. Arithmetic
(plus 1 2
(pluss 1 2)
(minus 5 2)
(times 3 4)
(divide 3 2)

# 4. Comparisons and predicates
(less 1 2)
(equal 1 1)
(isint 3)
(isreal 3.0)
(isatom 'x)
(islist '(1 2 3))
(isnull null)

# 5. Head / tail / cons
(head '(a b c))
(tail '(a b c))
(cons 1 '(2 3))

# 6. Logical operators
(and true false)
(or true false)
(xor true false)
(not true)

# 7. Func / lambda / calls
(func inc (x) (plus x 1)) (inc 5)
(setq f (lambda (x) (times x x))) (f 4)
((lambda (x y) (plus x y)) 3 4)

# 8. Prog, local scope and return
(prog (a b) (setq a 1) (setq b (plus a 2)) (plus a b))
(func test () (prog (a) (setq a 1) (return 99) 5)) (test)

# 9. Cond and while
(cond (less 2 1) 10 20)
(cond (less 1 2) 100)
(prog (i) (setq i 0) (while (less i 3) (setq i (plus i 1))) i)

# 10. Break inside while
(prog (i) (setq i 0) (while (less i 10) (setq i (plus i 1)) (cond (greater i 3) (break))) i)

# 11. Eval
(eval '(plus 1 2))
(eval 5)
(eval 'x)

# 12. Recursion: factorial
(func fact (n) (cond (less n 2) 1 (times n (fact (minus n 1))))) (fact 5)

# 13. Closures
(prog () (setq maker (lambda (x) (lambda () x))) (setq f (maker 5)) (f))

# 14. Type error: plus with boolean and number
(plus true 1)

# 15. Argument evaluation order and side effects
(prog (a) (setq a 0) (plus (setq a (plus a 1)) (setq a (plus a 2))) a)
